# Учебный проект системы учета времени выполнения методов

## Описание

Разработанная система использует **Spring AOP** для логирования
и анализирования данных о времени выполнения методов стандартного CRUD приложения и сохранения информации в базу данных.

## CRUD приложение

Приложение состоит из простого Spring Boot RESTful API и позволяет создавать, извлекать, обновлять и удалять клиентские данные класса Employee, который состоит из полей: имя, фамилия и e-mail.
*Employee репозиторий* имплементирует *JpaRepository* для предоставления возможностей *JPA CRUD*.
База данных - PostgreSQL, сборщик - Maven. 

## Создание и сохранение данных о выполнении метода

Для упорядочения сохранения данных приложение создаёт объекта класса *StatisticsMethodTime*
и сохраняет его в базу данных с помощью метода *save* класса *StatisticsService*. 
Также реализован *StatisticsController*, который позволяет получить всю статистику выполнения методов (*/statistics/all*), 
а также среднее выполнение методов с *аннотацией TrackTime* *(/statistics/avgTrackTime)*.

## TrackTime aspect

Данный аспект имеет два *advice* для сохранения данных о выполнении методов, которые помечены аннотацией **@TrackTime**. 
Первый *Around* аспект *trackTimeAdvice* выполняет подсчет времени, второй *AfterThrowing* аспект выполняет логирование ошибки при поиске сущности по не существующему ID.

## TrackAsyncTimeAspect

Для асинхронного отслеживания времени выполнения методов, помеченных аннотацией **@TrackAsyncTime**, был создан репозиторий изменений сущностей Employee в базе данных.
Каждое изменение логируется и сохраняется в *HashSet*. Для демонстрации, при запуске приложения, с помощью EventListener, асинхронно запускается метод для логирования изменения состояний.

## Запуск приложения

Приложение использует PostgreSQL для хранения всех данных. Поэтому следует прописать собственные параметры в *application.properties*. Далее запустить приложение любым удобным способом и 
через настроенный порт localhost и интересующий endpoint начать выполнять любые CRUD операции и получать статистику по выполнению методов. 
